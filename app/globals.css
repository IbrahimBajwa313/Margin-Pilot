@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
  /* Light Mode - MarginPilot friendly */
  --background: #F0F4F8;
  --foreground: #0F172A;
  --card: #FFFFFF;
  --card-foreground: #0F172A;
  --popover: #FFFFFF;
  --popover-foreground: #0F172A;
  --primary: #2FD3C6;
  --primary-foreground: #0B0F14;
  --secondary: #E2E8F0;
  --secondary-foreground: #0F172A;
  --muted: #F1F5F9;
  --muted-foreground: #64748B;
  --accent: #E0F7F5;
  --accent-foreground: #0F172A;
  --destructive: #EF4444;
  --destructive-foreground: #FFFFFF;
  --success: #10B981;
  --warning: #F59E0B;
  --border: #E2E8F0;
  --input: #F8FAFC;
  --ring: #2FD3C6;
  --radius: 0.75rem;

  /* Chart Colors */
  --chart-1: #0F172A;
  --chart-2: #10B981;
  --chart-3: #38BDF8;
  --chart-4: #F59E0B;
  --chart-5: #EF4444;

  --sidebar: #FFFFFF;
  --sidebar-foreground: #0F172A;
  --sidebar-primary: #0F172A;
  --sidebar-primary-foreground: #FFFFFF;
  --sidebar-accent: #F1F5F9;
  --sidebar-accent-foreground: #0F172A;
  --sidebar-border: #E2E8F0;
  --sidebar-ring: #0F172A;

  --gradient-primary: linear-gradient(135deg, #2FD3C6 0%, #22c9bd 100%);
  --gradient-card: linear-gradient(180deg, #FFFFFF 0%, #F8FAFC 100%);
  --gradient-sidebar: linear-gradient(180deg, #FFFFFF 0%, #F8FAFC 100%);
}

.dark {
  /* MarginPilot Premium Dark Mode */
  --background: #0B0F14;
  /* Very dark charcoal / near black */
  --foreground: #FFFFFF;

  --card: #111826;
  /* Dark grey, slightly lighter than background */
  --card-foreground: #FFFFFF;

  --popover: #111826;
  --popover-foreground: #FFFFFF;

  --primary: #2FD3C6;
  /* Teal / Aqua */
  --primary-foreground: #0B0F14;

  --secondary: #1F2937;
  --secondary-foreground: #FFFFFF;

  --muted: #1F2937;
  --muted-foreground: #9CA3AF;
  /* Light grey */

  --accent: #1F2937;
  --accent-foreground: #2FD3C6;

  --destructive: #F87171;
  /* Red */
  --destructive-foreground: #0B0F14;

  --success: #4ADE80;
  /* Green */
  --warning: #FBBF24;
  /* Amber */

  --border: #1F2937;
  /* Minimal usage */
  --input: #111826;
  --ring: #2FD3C6;

  /* Chart Colors matching purpose-driven scheme */
  --chart-1: #4ADE80;
  /* Green - Targets */
  --chart-2: #A78BFA;
  /* Purple - Profit */
  --chart-3: #60A5FA;
  /* Blue - Progress */
  --chart-4: #FBBF24;
  /* Amber - Costs */
  --chart-5: #F87171;
  /* Red - Warnings */

  --sidebar: #111826;
  --sidebar-foreground: #FFFFFF;
  --sidebar-primary: #2FD3C6;
  --sidebar-primary-foreground: #0B0F14;
  --sidebar-accent: #1F2937;
  --sidebar-accent-foreground: #2FD3C6;
  --sidebar-border: #1F2937;
  --sidebar-ring: #2FD3C6;

  /* Subtle gradients */
  --gradient-primary: linear-gradient(135deg, #2FD3C6 0%, #22D3EE 100%);
  --gradient-card: linear-gradient(180deg, #111826 0%, #0E1624 100%);
  --gradient-sidebar: linear-gradient(180deg, #111826 0%, #0B0F14 100%);
}

@theme inline {
  --font-sans: "Geist", "Geist Fallback";
  --font-mono: "Geist Mono", "Geist Mono Fallback";
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-success: var(--success);
  --color-warning: var(--warning);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Semantic color utilities */
  --color-success: var(--success);
  --color-success-foreground: #FFFFFF;
  --color-warning: var(--warning);
  --color-warning-foreground: #FFFFFF;
  --color-info: #3B82F6;
  --color-info-foreground: #FFFFFF;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    background-image:
      radial-gradient(at 0% 0%, rgba(14, 165, 233, 0.04) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(6, 182, 212, 0.04) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(139, 92, 246, 0.02) 0px, transparent 50%);
  }

  .dark body {
    background-image:
      radial-gradient(at 0% 0%, rgba(47, 211, 198, 0.03) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(11, 15, 20, 0) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(17, 24, 38, 0.5) 0px, transparent 50%);
  }

  /* Theme-aware card panel (light + dark) */
  .card-panel {
    background: var(--gradient-card);
    border: 1px solid var(--border);
    border-radius: 1rem;
  }

  /* Premium card styling */
  [class*="card"] {
    @apply shadow-sm border border-border;
    backdrop-filter: blur(10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--card);
  }



  /* Premium card with gradient overlay */
  [class*="card"][class*="gradient"] {
    background: var(--gradient-card);
  }

  /* Premium button enhancements */
  button[class*="bg-primary"] {
    background: var(--gradient-primary);
    transition: all 0.2s ease;
  }


  /* Enhanced focus states */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary/50;
  }

  /* Premium table styling */
  table {
    @apply border-collapse;
  }

  th {
    @apply font-semibold text-foreground/90;
  }

  /* Enhanced badge styling */
  [class*="badge"] {
    @apply transition-all duration-200;
  }

  /* Premium select/dropdown */
  [role="combobox"],
  [role="listbox"] {
    @apply transition-all duration-200;
  }

  /* Enhanced modal/dialog */
  [role="dialog"] {
    @apply backdrop-blur-sm;
  }

  /* Premium link styling */
  a:not([class*="button"]):not([class*="link"]) {
    @apply text-primary hover:text-primary/80 transition-colors;
  }

  /* Enhanced separator */
  [class*="separator"] {
    @apply bg-border/50;
  }

  /* Premium sidebar enhancements */
  [data-slot="sidebar"],
  aside[class*="sidebar"],
  aside[class*="bg-sidebar"] {
    background: var(--gradient-sidebar);
  }

  /* Enhanced navigation hover states */



  /* Enhanced input focus glow - theme aware */
  input:focus,
  textarea:focus,
  select:focus {
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 20%, transparent);
  }

  /* Premium badge styling */
  [class*="badge"] {
    @apply font-medium;
  }

  /* Enhanced table row hover */
  tbody tr:hover {
    @apply bg-muted/50;
  }

  /* Premium progress bars */
  [role="progressbar"] {
    @apply transition-all duration-300;
  }

  /* Enhanced tooltip styling */
  [role="tooltip"] {
    @apply backdrop-blur-sm;
  }

  /* Premium divider/separator */
  hr {
    @apply border-border/50;
  }

  /* Enhanced dropdown menus */
  [role="menu"] {
    @apply backdrop-blur-xl shadow-xl;
    border: 1px solid var(--border);
  }

  /* Premium scrollbar for sidebar */
  aside nav {
    scrollbar-width: thin;
    scrollbar-color: rgba(148, 163, 184, 0.2) transparent;
  }

  aside nav::-webkit-scrollbar {
    width: 6px;
  }

  aside nav::-webkit-scrollbar-track {
    background: transparent;
  }

  aside nav::-webkit-scrollbar-thumb {
    background-color: rgba(148, 163, 184, 0.3);
    border-radius: 3px;
  }

  aside nav::-webkit-scrollbar-thumb:hover {
    background-color: rgba(148, 163, 184, 0.5);
  }

  .dark aside nav::-webkit-scrollbar-thumb {
    background-color: rgba(100, 116, 139, 0.3);
  }

  .dark aside nav::-webkit-scrollbar-thumb:hover {
    background-color: rgba(100, 116, 139, 0.5);
  }

  /* Hide scrollbar but keep scroll functionality (sidebar, etc.) */
  .no-scrollbar {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Premium glassmorphism effect */
  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .dark .glass {
    background: rgba(19, 24, 41, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Enhanced gradient text */
  .gradient-text {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Premium shimmer effect for loading states */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }

    100% {
      background-position: 1000px 0;
    }
  }

  .shimmer {
    animation: shimmer 2s infinite;
    background: linear-gradient(to right,
        transparent 0%,
        rgba(255, 255, 255, 0.1) 50%,
        transparent 100%);
    background-size: 1000px 100%;
  }

  .dark .shimmer {
    background: linear-gradient(to right,
        transparent 0%,
        rgba(255, 255, 255, 0.05) 50%,
        transparent 100%);
    background-size: 1000px 100%;
  }

  /* Enhanced focus ring animations */
  *:focus-visible {
    animation: focusRing 0.3s ease-out;
  }

  @keyframes focusRing {
    0% {
      outline-offset: 0px;
      outline-width: 0px;
    }

    100% {
      outline-offset: 2px;
      outline-width: 2px;
    }
  }

  /* Premium border glow effect */
  .border-glow {
    box-shadow: 0 0 0 1px var(--primary), 0 0 20px rgba(14, 165, 233, 0.1);
  }

  .dark .border-glow {
    box-shadow: 0 0 0 1px var(--primary), 0 0 20px rgba(56, 189, 248, 0.15);
  }

  /* Enhanced input styling */
  input,
  textarea,
  select {
    @apply transition-all duration-200;
  }

  input:focus,
  textarea:focus,
  select:focus {
    @apply ring-2 ring-primary/20 border-primary/50;
  }

  /* Premium button enhancements */
  button {
    @apply transition-all duration-200;
  }

  /* Smooth scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(148, 163, 184, 0.3) transparent;
  }

  *::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  *::-webkit-scrollbar-thumb {
    background-color: rgba(148, 163, 184, 0.3);
    border-radius: 4px;
  }

  *::-webkit-scrollbar-thumb:hover {
    background-color: rgba(148, 163, 184, 0.5);
  }

  .dark *::-webkit-scrollbar-thumb {
    background-color: rgba(100, 116, 139, 0.3);
  }

  .dark *::-webkit-scrollbar-thumb:hover {
    background-color: rgba(100, 116, 139, 0.5);
  }
}

/* Loader Animations */
@layer components {

  /* Shield Container Animation */
  .workshop-loader-shield {
    animation: workshopShieldEntry 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    transform-origin: center;
  }

  @keyframes workshopShieldEntry {
    0% {
      opacity: 0;
      transform: scale(0.5) rotate(-10deg);
    }

    100% {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
  }

  /* Shield Outline Pulse */
  .workshop-shield-outline {
    animation: workshopOutlinePulse 2s ease-in-out infinite;
  }

  @keyframes workshopOutlinePulse {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.8;
    }
  }

  /* Wrench Rotation - Rotates around its center with subtle pulse */
  .workshop-wrench-group {
    animation: workshopWrenchRotate 2.5s ease-in-out infinite;
  }

  @keyframes workshopWrenchRotate {

    0%,
    100% {
      transform: rotate(-20deg);
    }

    25% {
      transform: rotate(-25deg);
    }

    75% {
      transform: rotate(-15deg);
    }
  }

  .workshop-wrench-handle,
  .workshop-wrench-jaw {
    animation: workshopWrenchPulse 2s ease-in-out infinite;
  }

  /* Wrench Pulse */
  @keyframes workshopWrenchPulse {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.85;
    }
  }

  /* Bar Chart Staggered Growth - Red to Orange to Green */
  .workshop-bar-1 {
    animation: workshopBarGrow1 2.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    transform-origin: bottom;
  }

  .workshop-bar-2 {
    animation: workshopBarGrow2 2.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    transform-origin: bottom;
  }

  .workshop-bar-3 {
    animation: workshopBarGrow3 2.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    transform-origin: bottom;
  }

  @keyframes workshopBarGrow1 {
    0% {
      transform: scaleY(0);
      opacity: 0;
    }

    15% {
      opacity: 1;
    }

    100% {
      transform: scaleY(1);
      opacity: 1;
    }
  }

  @keyframes workshopBarGrow2 {
    0% {
      transform: scaleY(0);
      opacity: 0;
    }

    25% {
      opacity: 1;
    }

    100% {
      transform: scaleY(1);
      opacity: 1;
    }
  }

  @keyframes workshopBarGrow3 {
    0% {
      transform: scaleY(0);
      opacity: 0;
    }

    35% {
      opacity: 1;
    }

    100% {
      transform: scaleY(1);
      opacity: 1;
    }
  }

  /* Arrow Shooting Upward with Smooth Curve */
  .workshop-arrow-group {
    animation: workshopArrowShoot 3s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
  }

  @keyframes workshopArrowShoot {
    0% {
      opacity: 0;
      transform: translate(0, 10px) scale(0.9);
    }

    25% {
      opacity: 0.6;
    }

    45% {
      opacity: 1;
      transform: translate(3%, -10%) scale(1);
    }

    70% {
      opacity: 1;
      transform: translate(6%, -20%) scale(1.05);
    }

    100% {
      opacity: 0;
      transform: translate(10%, -30%) scale(1.1);
    }
  }

  /* Progress Ring Animation */
  .workshop-progress-ring-container {
    animation: workshopProgressRotate 2s linear infinite;
  }

  .workshop-progress-ring {
    transform-origin: center;
  }

  @keyframes workshopProgressRotate {
    0% {
      transform: rotate(-90deg);
    }

    100% {
      transform: rotate(270deg);
    }
  }

  /* Text Fade In */
  .workshop-loader-text {
    animation: workshopTextFadeIn 0.8s ease-out 0.3s forwards;
    opacity: 0;
  }

  .workshop-app-name {
    animation: workshopTextFadeIn 0.8s ease-out 0.5s forwards;
    opacity: 0;
  }

  @keyframes workshopTextFadeIn {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Exit Animation */
  .workshop-loader-exit {
    animation: workshopLoaderExit 0.4s ease-in forwards;
  }

  @keyframes workshopLoaderExit {
    0% {
      opacity: 1;
      transform: scale(1);
    }

    100% {
      opacity: 0;
      transform: scale(0.8);
    }
  }

  /* Page transition overlay animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  .animate-in {
    animation: fadeIn 0.3s ease-out;
  }
}